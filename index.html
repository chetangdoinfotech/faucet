<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Dithereum: Testnet Faucet</title>

	<link rel="icon" type="image/png" href="assets/img/DithereumIconFavicon.png"/>
	<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-noty/2.4.1/packaged/jquery.noty.packaged.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.0/moment.min.js"></script>
	<link rel="stylesheet" href="assets/css/alertify.min.css">
	<style>
		.vertical-center {
			min-height: 100%;
			min-height: 70vh;
			/*display: flex;*/
			margin-top: 120px;
			align-items: center;
		}
		.progress {
			position: relative;
		}
		.progress span {
			position: absolute;
			display: block;
			width: 100%;
			color: white;
		}
		pre {
			padding: 6px;
			margin: 0;
		}

		.navbar {
			position: relative;
			min-height: 76px;
			margin-bottom: 20px;
			border: 1px solid transparent;
		}
		.navbar .nav-link {
			color: #0062cc;
			font-size: 27px;
		}
		.navbar-right {
			margin: 10px auto;
		}
		#addDTHNetwork.btn-outline-primary {
			color: #000000;
			border-color: #007bff;
			background-color: transparent;


			padding: 0.25rem 0.5rem;
			font-size: 1.6rem;
			line-height: 1.5;
			border-radius: 0.2rem;
		}
		#addDTHNetwork.btn-outline-primary:hover {
			color: #fff;
			border-color: #007bff;
			background-color: #007bff;
		}

		.btn.active.focus, .btn.active:focus, .btn.focus, .btn:active.focus, .btn:active:focus, .btn:focus {
			outline: none;
			outline-offset: -2px;
		}

		.footer {
			padding: 15px 15px;
			background-color: #e7e7e7;
		}

		@media(min-width: 1600px){
			.vertical-center {
				min-height: 100%;
				min-height: 100vh;
				/*display: flex;*/
				margin-top: 120px;
				align-items: center;
			}
		}
	</style>
</head>

<body>
	<header>
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">
						<img src="assets/img/logo.png">
					</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

					<ul class="nav navbar-nav navbar-right">
						<li class="nav-item mr-3">
							<button id="addDTHNetwork" style="margin-top: 15px;" class="btn btn-outline-primary btn-sm"><img src="assets/img/metamask.png" alt="metamask" style="width: 16px;margin-right: 4px;">Add Dithereum Test Network</button>
						</li>
<!-- 			        <li class="nav-item">
		              <a class="nav-link" href="https://t.me/Dithereum" target="_blank"><i class="fa fa-telegram" aria-hidden="true"></i></a>
		            </li>
		            <li class="nav-item">
		              <a class="nav-link" href="https://twitter.com/dithereum" target="_blank" style="padding-left: 0;padding-right: 0;"><i class="fa fa-twitter" aria-hidden="true"></i></a>
		            </li>
		            <li class="nav-item">
		              <a class="nav-link" href="https://www.youtube.com/channel/UCDPzTaaVk4ywEsLaf6nLAeQ" target="_blank"><i class="fa fa-youtube-play" aria-hidden="true"></i></a>
		          </li> -->
		      </ul>
		  </div><!-- /.navbar-collapse -->
		</div><!-- /.container-fluid -->
	</nav>
</header>
<div class="vertical-center">
	<div class="container">
		<div class="row" style="margin-bottom: 16px;">
			<div class="col-lg-12">
				<h1 style="text-align: center;"><i class="fa fa-bath" aria-hidden="true"></i> Dithereum Testnet Faucet</h1>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2">
				<div class="input-group">
					<input id="url" name="url" type="text" class="form-control" placeholder="Input your Dithreum address...">
					<span class="input-group-btn">
						<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Give me DTH	<i class="fa fa-caret-down" aria-hidden="true"></i></button>
						<ul class="dropdown-menu dropdown-menu-right">
							<li><a style="text-align: center;" onclick="tier= 0 ;symbol='DTH'; grecaptcha.execute()">10 DTH</a></li>
						</ul>
					</span>
					<span class="input-group-btn">
						<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Peggy tokens<i class="fa fa-caret-down" aria-hidden="true"></i></button>
						<ul class="dropdown-menu dropdown-menu-right">
							<li><a style="text-align: center;" onclick="symbol=&#34;BTC&#34;; grecaptcha.execute()">0.1 BTC</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;ETH&#34;; grecaptcha.execute()">0.1 ETH</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;DUSD&#34;; grecaptcha.execute()">10 DUSD</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;BUSD&#34;; grecaptcha.execute()">10 BUSD</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;DAI&#34;; grecaptcha.execute()">10 DAI</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;USDC&#34;; grecaptcha.execute()">10 USDC</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;USDT&#34;; grecaptcha.execute()">10 USDT</a></li>
							<li><a style="text-align: center;" onclick="symbol=&#34;XRP&#34;; grecaptcha.execute()">10 XRP</a></li>
						</ul>
					</span>
				</div>
				<div class="g-recaptcha" data-sitekey="6LcUh58dAAAAAAD1hIFVeQEVmk_iSuQmgMcTkfFe" data-callback="submit" data-size="invisible"></div>
			</div>
		</div>
				<!-- <div class="row" style="margin-top: 32px;">
					<div class="col-lg-6 col-lg-offset-3">
						<div class="panel panel-small panel-default">
							<div class="panel-body" style="padding: 0; overflow: auto; max-height: 300px;">
								<table id="requests" class="table table-condensed" style="margin: 0;"></table>
							</div>
							<div class="panel-footer">
								<table style="width: 100%">
									<tr>
										<td style="text-align: center;"><i class="fa fa-rss" aria-hidden="true"></i> <span id="peers"></span> peers</td>
										<td style="text-align: center;"><i class="fa fa-database" aria-hidden="true"></i> <span id="block"></span> blocks</td>
										<td style="text-align: center;"><i class="fa fa-heartbeat" aria-hidden="true"></i> <span id="funds"></span> DTH</td>
										<td style="text-align: center;"><i class="fa fa-university" aria-hidden="true"></i> <span id="funded"></span> funded</td>
									</tr>
								</table>
							</div>
						</div>
					</div>
				</div> -->
			</div>
		</div>

		<footer class="footer bg-light py-3 mt-5">
			<div class="container">
				<div class="row">
					<div class="col-md-12 text-center">
						<p class="m-0">Â© 2021 - 2021 Dithereum. All rights reserved.</p>
					</div>
				</div>
			</div>
		</footer>
		<script src="assets/js/alertify.js"></script>
		<script>
			<!---
			    To make add to metamask button active, 
			     This block change as per your network -chainId in hexdec, chainName, nativeCurrency( name, symbol, decimals ), rpcUrls, blockchainExplorerUrls   
			-->
			$('#addDTHNetwork').click(function(){
			    if(window.ethereum) {               
			        window.ethereum.request({method: 'eth_requestAccounts'})
			        window.ethereum.request({
			            method: 'wallet_addEthereumChain',
			            params: [{
			                chainId: '0xe0', 
			                chainName: "ABC Testnet",
			                nativeCurrency: {
			                    name: "ABC Network",
			                    symbol: "ABC",
			                    decimals: 18
			                },
			                rpcUrls: ['https://testnet-rpc.abc.network/'],     blockExplorerUrls: ['https://testnet.abc.network/']                    
			            }]
			        })				   
			    }
			});
			<!---	-->		


			var submit = function (captcha) {
				//alertify.alert("SUCCESS", "Processing Your Request.");
				//jquery POST req
				/*console.log($("#url")[0].value, symbol);
				$.post('https://faucet-api.dithereum.org',{ walletid: $("#url")[0].value, tokenname: symbol }, function(response){
					console.log(response);
					if (response.ERROR) {
						alertify.alert("WARNING", response.ERROR);
					} 
					else {
						alertify.alert("SUCCESS", "Your wallet has been funded.");
					}
				})*/
				//end
				
				var settings = {
					"url": "https://faucet-api.dithereum.org",
					"method": "POST",
					"crossDomain": true,
					"timeout": 0,
					"headers": {
						"Content-Type": "application/json",
					},
					"data": JSON.stringify({ "walletid": $("#url")[0].value, "tokenname": symbol, "g-recaptcha-response": captcha.toString() }),
					"statusCode": {
						429: function(){
							alertify.alert("ERROR", "Error Code 429, IP restricted for 120 mins");
						}
					},
				};
				alertify.alert("SUCCESS", "Processing Your Request.");
				$.ajax(settings).done(function (response) {
					try{
						var resp = JSON.parse(JSON.stringify(response));
						console.log("<<< (response) >>>",resp);
						if(resp['ERROR']){
							alertify.alert("ERROR", resp.ERROR);
						}
						else if(resp['IP_ERROR']){
							alertify.alert("ERROR", resp.IP_ERROR);
						}
						else if(resp['userTxHash']){
							alertify.alert("SUCCESS", "Your wallet funded.Txhash-"+ resp.userTxHash);
						}						
						else{
							console.log("in else ...", JSON.parse(response)['userTxHash']);
							//alertify.alert("SUCCESS", response);
							if(JSON.parse(response)['userTxHash']){
								alertify.alert("SUCCESS", "Your wallet funded.Txhash-"+JSON.parse(response)['userTxHash']);
							}else{	
								alertify.alert("SUCCESS", response['ERROR']);
							}
						}
						/*
						if(response.ERROR) {						
							alertify.alert("WARNING", response.ERROR);
						}
						else {
							alertify.alert("SUCCESS", "Your wallet has been funded.");
						}
						*/
					}catch(e){
						//console.log("<<Error[UI], try catch>>>",e);
						console.log("~~~response~~~~",response);						
						alertify.alert("ERROR", response);						
					}
				});
				grecaptcha.reset();
			};

		</script>
		<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	</body>
	</html>
